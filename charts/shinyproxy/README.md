
<!-- markdownlint-disable -->
# BioAnalyze - ShinyProxy Helm Chart
<!-- markdownlint-restore -->

![BioAnalyze Logo](https://raw.githubusercontent.com/Dabble-of-DevOps-BioAnalyze/biohub-info/master/logos/BioAnalyze_v2-01.jpg)

<!--




  ** DO NOT EDIT THIS FILE
  **
  ** This file was automatically generated by the `build-harness`.
  ** 1) Make all changes to `README.yaml`
  ** 2) Run `make init` (you only need to do this once)
  ** 3) Run`make readme` to rebuild this file.
  **
  ** (We maintain HUNDREDS of open source projects. This is how we maintain our sanity.)
  **





-->

This is a helm chart for the awesome [ShinyProxy](https://www.shinyproxy.io/).

ShinyProxy adds Authentication and Load Balancing to RShiny, Dash and Flask Apps.

## Parameters

### Global parameters

| Name                      | Description                                     | Value |
| ------------------------- | ----------------------------------------------- | ----- |
| `global.imageRegistry`    | Global Docker image registry                    | `""`  |
| `global.imagePullSecrets` | Global Docker registry secret names as an array | `[]`  |


### Common parameters

| Name                | Description                                                                           | Value           |
| ------------------- | ------------------------------------------------------------------------------------- | --------------- |
| `nameOverride`      | String to partially override nginx.fullname template (will maintain the release name) | `""`            |
| `fullnameOverride`  | String to fully override nginx.fullname template                                      | `""`            |
| `kubeVersion`       | Force target Kubernetes version (using Helm capabilities if not set)                  | `""`            |
| `clusterDomain`     | Kubernetes Cluster Domain                                                             | `cluster.local` |
| `extraDeploy`       | Extra objects to deploy (value evaluated as a template)                               | `[]`            |
| `commonLabels`      | Add labels to all the deployed resources                                              | `{}`            |
| `commonAnnotations` | Add annotations to all the deployed resources                                         | `{}`            |


### ShinyProxy parameters

| Name                 | Description                                                          | Value                       |
| -------------------- | -------------------------------------------------------------------- | --------------------------- |
| `image.registry`     | ShinyProxy image registry                                            | `docker.io`                 |
| `image.repository`   | ShinyProxy image repository                                          | `dabbleofdevops/shinyproxy` |
| `image.tag`          | ShinyProxy image tag (immutable tags are recommended)                | `2.6.0`                     |
| `image.pullPolicy`   | ShinyProxy image pull policy                                         | `IfNotPresent`              |
| `image.pullSecrets`  | Specify docker-registry secret names as an array                     | `[]`                        |
| `image.debug`        | Set to true if you would like to see extra information on logs       | `false`                     |
| `hostAliases`        | Deployment pod host aliases                                          | `[]`                        |
| `command`            | Override default container command (useful when using custom images) | `[]`                        |
| `args`               | Override default container args (useful when using custom images)    | `[]`                        |
| `extraEnvVars`       | Extra environment variables to be set on ShinyProxy containers       | `[]`                        |
| `extraEnvVarsCM`     | ConfigMap with extra environment variables                           | `""`                        |
| `extraEnvVarsSecret` | Secret with extra environment variables                              | `""`                        |


### ShinyProxy deployment parameters

| Name                                    | Description                                                                               | Value   |
| --------------------------------------- | ----------------------------------------------------------------------------------------- | ------- |
| `replicaCount`                          | Number of ShinyProxy replicas to deploy                                                   | `1`     |
| `podLabels`                             | Additional labels for ShinyProxy pods                                                     | `{}`    |
| `podAnnotations`                        | Annotations for ShinyProxy pods                                                           | `{}`    |
| `podAffinityPreset`                     | Pod affinity preset. Ignored if `affinity` is set. Allowed values: `soft` or `hard`       | `""`    |
| `podAntiAffinityPreset`                 | Pod anti-affinity preset. Ignored if `affinity` is set. Allowed values: `soft` or `hard`  | `soft`  |
| `nodeAffinityPreset.type`               | Node affinity preset type. Ignored if `affinity` is set. Allowed values: `soft` or `hard` | `""`    |
| `nodeAffinityPreset.key`                | Node label key to match Ignored if `affinity` is set.                                     | `""`    |
| `nodeAffinityPreset.values`             | Node label values to match. Ignored if `affinity` is set.                                 | `[]`    |
| `affinity`                              | Affinity for pod assignment                                                               | `{}`    |
| `nodeSelector`                          | Node labels for pod assignment. Evaluated as a template.                                  | `{}`    |
| `tolerations`                           | Tolerations for pod assignment. Evaluated as a template.                                  | `{}`    |
| `priorityClassName`                     | Priority class name                                                                       | `""`    |
| `podSecurityContext.enabled`            | Enabled ShinyProxy pods' Security Context                                                 | `false` |
| `podSecurityContext.fsGroup`            | Set ShinyProxy pod's Security Context fsGroup                                             | `1001`  |
| `podSecurityContext.sysctls`            | sysctl settings of the ShinyProxy pods                                                    | `[]`    |
| `containerSecurityContext.enabled`      | Enabled ShinyProxy containers' Security Context                                           | `false` |
| `containerSecurityContext.runAsUser`    | Set ShinyProxy container's Security Context runAsUser                                     | `1001`  |
| `containerSecurityContext.runAsNonRoot` | Set ShinyProxy container's Security Context runAsNonRoot                                  | `true`  |
| `containerPorts.http`                   | Sets http port inside ShinyProxy container                                                | `8080`  |
| `containerPorts.https`                  | Sets https port inside ShinyProxy container                                               | `""`    |
| `resources.requests.cpu`                | The requested resources for the ShinyProxy container                                      | `200m`  |
| `resources.requests.memory`             | The requested resources for the ShinyProxy container                                      | `512Mi` |
| `resources.limits.cpu`                  | The requested resources for the ShinyProxy container                                      | `300m`  |
| `resources.limits.memory`               | The requested resources for the ShinyProxy container                                      | `800Mi` |
| `livenessProbe.enabled`                 | Enable livenessProbe                                                                      | `true`  |
| `livenessProbe.initialDelaySeconds`     | Initial delay seconds for livenessProbe                                                   | `30`    |
| `livenessProbe.periodSeconds`           | Period seconds for livenessProbe                                                          | `10`    |
| `livenessProbe.timeoutSeconds`          | Timeout seconds for livenessProbe                                                         | `5`     |
| `livenessProbe.failureThreshold`        | Failure threshold for livenessProbe                                                       | `6`     |
| `livenessProbe.successThreshold`        | Success threshold for livenessProbe                                                       | `1`     |
| `readinessProbe.enabled`                | Enable readinessProbe                                                                     | `true`  |
| `readinessProbe.initialDelaySeconds`    | Initial delay seconds for readinessProbe                                                  | `5`     |
| `readinessProbe.periodSeconds`          | Period seconds for readinessProbe                                                         | `5`     |
| `readinessProbe.timeoutSeconds`         | Timeout seconds for readinessProbe                                                        | `3`     |
| `readinessProbe.failureThreshold`       | Failure threshold for readinessProbe                                                      | `3`     |
| `readinessProbe.successThreshold`       | Success threshold for readinessProbe                                                      | `1`     |
| `customLivenessProbe`                   | Override default liveness probe                                                           | `{}`    |
| `customReadinessProbe`                  | Override default readiness probe                                                          | `{}`    |
| `autoscaling.enabled`                   | Enable autoscaling for ShinyProxy deployment                                              | `false` |
| `autoscaling.minReplicas`               | Minimum number of replicas to scale back                                                  | `""`    |
| `autoscaling.maxReplicas`               | Maximum number of replicas to scale out                                                   | `""`    |
| `autoscaling.targetCPU`                 | Target CPU utilization percentage                                                         | `""`    |
| `autoscaling.targetMemory`              | Target Memory utilization percentage                                                      | `""`    |
| `extraVolumes`                          | Array to add extra volumes                                                                | `[]`    |
| `extraVolumeMounts`                     | Array to add extra mount                                                                  | `[]`    |
| `serviceAccount.create`                 | Enable creation of ServiceAccount for nginx pod                                           | `false` |
| `serviceAccount.name`                   | The name of the ServiceAccount to use.                                                    | `""`    |
| `serviceAccount.annotations`            | Annotations for service account. Evaluated as a template.                                 | `{}`    |
| `serviceAccount.autoMount`              | Auto-mount the service account token in the pod                                           | `false` |
| `sidecars`                              | Sidecar parameters                                                                        | `[]`    |
| `sidecarSingleProcessNamespace`         | Enable sharing the process namespace with sidecars                                        | `false` |
| `initContainers`                        | Extra init containers                                                                     | `[]`    |
| `pdb.create`                            | Created a PodDisruptionBudget                                                             | `false` |
| `pdb.minAvailable`                      | Min number of pods that must still be available after the eviction                        | `1`     |
| `pdb.maxUnavailable`                    | Max number of pods that can be unavailable after the eviction                             | `0`     |


### ShinyProxy clusterissuer parameters to enable letsEncrypt

| Name                    | Description                                 | Value   |
| ----------------------- | ------------------------------------------- | ------- |
| `clusterIssuer.enabled` | create a clusterissuer let's encrypt secret | `false` |
| `clusterIssuer.email`   | email to add to letsEncrypt                 | `""`    |


### ShinyProxy AppPod Application Pod Parameters

| Name                               | Description                         | Value   |
| ---------------------------------- | ----------------------------------- | ------- |
| `appPod.resources.requests.cpu`    | Resources requests for spawned pods | `200m`  |
| `appPod.resources.requests.memory` | Resources requests for spawned pods | `100Mi` |
| `appPod.resources.limits.cpu`      | Resources requests for spawned pods | `300m`  |
| `appPod.resources.limits.memory`   | Resources requests for spawned pods | `200Mi` |


### ShinyProxy Proxy Authentication

| Name | Description | Value |
| ---- | ----------- | ----- |


### ShinyProxy Proxy Simple Username/Password Authentication

| Name                     | Description                                                                                                                                                                                                            | Value               |
| ------------------------ | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------- |
| `authYamlEnabled`        | Optionally, pass in the parameters to authYaml as a Yaml string. This is mostly here to get around the AWS Marketplace limit of only having 15 overrides.                                                              | `false`             |
| `authYaml`               | Optionally, pass in the parameters to authYaml as a Yaml string. This is mostly here to get around the AWS Marketplace limit of only having 15 overrides. These values will be merged with the helm chart auth values. | `""`                |
| `auth.authSimpleEnabled` |                                                                                                                                                                                                                        | `true`              |
| `auth.users[0].name`     |                                                                                                                                                                                                                        | `user01`            |
| `auth.users[0].password` | Please note that you should absolutely change this password                                                                                                                                                            | `password123`       |
| `auth.users[0].groups`   | User Groups                                                                                                                                                                                                            | `scientists, users` |


### ShinyProxy Proxy Public / No Authentication

| Name                   | Description                              | Value   |
| ---------------------- | ---------------------------------------- | ------- |
| `auth.authNoneEnabled` | Default is no authentication, public app | `false` |


### ShinyProxy Proxy LDAP Authentication

| Name                            | Description                                                                                                                                   | Value   |
| ------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------- | ------- |
| `auth.authLDAPEnabled`          | Use LDAP Authentication                                                                                                                       | `false` |
| `auth.ldap.url`                 | the LDAP connection string, composed of the URL and base DN of the LDAP directory                                                             | `""`    |
| `auth.ldap.user-dn-pattern`     | pattern of the distinguished name for a user. Use this if all your users are in a single LDAP location                                        | `""`    |
| `auth.ldap.user-search-filter`  | LDAP filter to search for users. Use this if your users are in different LDAP locations, and you cannot use user-dn-pattern                   | `""`    |
| `auth.ldap.user-search-base`    | search base to search for users. Only used if user-search-filter is set                                                                       | `""`    |
| `auth.ldap.group-search-filter` | LDAP filter used to search for group memberships                                                                                              | `""`    |
| `auth.ldap.group-search-base`   | search base to search for groups. Only used if group-search-filter is set                                                                     | `""`    |
| `auth.ldap.manager-dn`          | the distinguished name of the user used to bind to the LDAP directory; leave empty if the initial bind is anonymous                           | `""`    |
| `auth.ldap.manager-password`    | the password of the user used to bind to the LDAP directory; can be omitted if manager-dn is empty (i.e. when the initial bind is anonymous). | `""`    |


### ShinyProxy Proxy Kerberos Authentication

| Name                                    | Description                                                                                                                                                                                                                 | Value   |
| --------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------- |
| `auth.authKerberosEnabled`              |                                                                                                                                                                                                                             | `false` |
| `auth.kerberos.auth-service-principal`  | principal name of the Kerberos entity that processes authentication requests;                                                                                                                                               | `""`    |
| `auth.kerberos.auth-service-keytab`     | path to the keytab file containing the secret of the auth-service-principal;                                                                                                                                                | `""`    |
| `auth.kerberos.deleg-service-principal` | principal name of the Kerberos entity that obtains delegated service tickets for the user; if not specified the value of the auth-service-principal will be used also for the deleg-service-principal;                      | `""`    |
| `auth.kerberos.deleg-service-keytab`    | path to the keytab file containing the secret of the deleg-service-principal; if not specified the value of the auth-service-keytab is used as the deleg-service-keytab;                                                    | `""`    |
| `auth.kerberos.backend-principals`      | array of service principals for which delegated service tickets should be obtained e.g. ["HTTP/your-api-server.com", "postgres/your-postgres-server.com"]                                                                   | `""`    |
| `auth.kerberos.client-ccache-path`      | absolute or relative path to a folder where user-specific credential caches are maintained; these are mounted automatically as volumes in the container, and contain service tickets for the configured backend-principals; | `""`    |
| `auth.kerberos.ticket-renew-interval`   | interval in milliseconds for automatically renewing the backend service tickets; the default is 28800000 which corresponds to 8 hours.                                                                                      | `""`    |


### ShinyProxy Proxy Single-Sign On / Keycloak Authentication

| Name                                       | Description                                                                                                                      | Value                          |
| ------------------------------------------ | -------------------------------------------------------------------------------------------------------------------------------- | ------------------------------ |
| `auth.authKeyCloakEnabled`                 | Enable KeyCloak/SSO                                                                                                              | `false`                        |
| `auth.keycloak.realm`                      |                                                                                                                                  | `yoursso`                      |
| `auth.keycloak.auth-server-url`            |                                                                                                                                  | `http://yoururl.com:8180/auth` |
| `auth.keycloak.resource`                   |                                                                                                                                  | `yourresource`                 |
| `auth.keycloak.credentials-secret`         |                                                                                                                                  | `your-credentials-secret`      |
| `auth.keycloak.ssl-required`               | one can set the SSL/HTTPS mode to one of none, all or external (default). These options are documented here;                     | `none`                         |
| `auth.keycloak.name-attribute`             | name of the attribute to use as the user’s name; one of name (default, current behaviour), preferred_username, nickname or email | `""`                           |
| `auth.keycloak.use-resource-role-mappings` | boolean value to use either client roles (true) or realm roles (false; default); see also the relevant Keycloak documentation.   | `false`                        |


### ShinyProxy Proxy OpenID Connect (OIDC) Authentication

| Name                        | Description                                                                                                                      | Value                                          |
| --------------------------- | -------------------------------------------------------------------------------------------------------------------------------- | ---------------------------------------------- |
| `auth.authOpenIDEnabled`    | Enable OIDC authentication. Default is false                                                                                     | `false`                                        |
| `auth.openid.auth-url`      |                                                                                                                                  | `https://accounts.google.com/o/oauth2/v2/auth` |
| `auth.openid.token-url`     |                                                                                                                                  | `https://www.googleapis.com/oauth2/v4/token`   |
| `auth.openid.jwks-url`      |                                                                                                                                  | `https://www.googleapis.com/oauth2/v3/certs`   |
| `auth.openid.logout-url`    | URL to be used for logging out of the OpenId session on the OpenId provider back-end; for an Auth0 back-end one can specify e.g. | `""`                                           |
| `auth.openid.client-id`     |                                                                                                                                  | `***`                                          |
| `auth.openid.client-secret` |                                                                                                                                  | `***`                                          |


### ShinyProxy Proxy SAML 2.0 Authentication

| Name                                 | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | Value                      |
| ------------------------------------ | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | -------------------------- |
| `auth.authSAMLEnabled`               | Enable SAML Auth                                                                                                                                                                                                                                                                                                                                                                                                                                                              | `false`                    |
| `auth.saml.idp-metadata-url`         | the URL where the IDP’s metadata can be retrieved                                                                                                                                                                                                                                                                                                                                                                                                                             | `""`                       |
| `auth.saml.app-entity-id`            | the entity ID of this application, must match the AudienceRestriction in the SAML assertion received from the IDP                                                                                                                                                                                                                                                                                                                                                             | `""`                       |
| `auth.saml.app-base-url`             | the application’s base URL. Some IDPs require that you specify valid callback URLs. This must match a valid callback URL.                                                                                                                                                                                                                                                                                                                                                     | `""`                       |
| `auth.saml.name-attribute`           | the name of the attribute in the SAML assertion containing the username                                                                                                                                                                                                                                                                                                                                                                                                       | `""`                       |
| `auth.saml.roles-attribute`          | the name of the attribute in the SAML assertion containing the user roles                                                                                                                                                                                                                                                                                                                                                                                                     | `""`                       |
| `auth.saml.logout-url`               | optional URL to which the user will be redirected when they logout                                                                                                                                                                                                                                                                                                                                                                                                            | `""`                       |
| `auth.saml.logout-method`            | can be local (default) or saml. See below for more information.                                                                                                                                                                                                                                                                                                                                                                                                               | `""`                       |
| `auth.saml.log-attributes`           | when set to true, ShinyProxy logs all SAML attributes provided by the IDP when a user logs in. This makes it easier to find the correct attribute to use for the name-attribute and roles-attribute configuration. Note that this may log sensitive information (e.g., some SAML claims may contain passwords or tokens), therefore this option should only be used when setting up SAML (or you have to ensure no sensitive values are contained within the SAML assertion). | `""`                       |
| `auth.saml.max-authentication-age`   | configures the maximum age of SAML credentials in seconds. By default, this is 7200 seconds (i.e. 2 hours). See this FAQ entry for more information and an alternative solution.                                                                                                                                                                                                                                                                                              | `""`                       |
| `auth.saml.force-authn`              | if set to true the IDP is required to re-authenticate the user and not rely on previous authentication events. This is useful when the IDP provides ShinyProxy credentials which are older than the time configured in the max-authentication-age. See this FAQ entry for more information and an alternative solution.                                                                                                                                                       | `""`                       |
| `auth.saml.keystore`                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | `path to the JKS keystore` |
| `auth.saml.keystore-password`        | (If the IDP sends back encrypted SAML assertions) Password to access the keystore. If omitted, encryption-cert-password will be used instead                                                                                                                                                                                                                                                                                                                                  | `""`                       |
| `auth.saml.encryption-cert-name`     | (If the IDP sends back encrypted SAML assertions) Name of the certificate whose public key the SAML Assertion is encrypted with                                                                                                                                                                                                                                                                                                                                               | `""`                       |
| `auth.saml.encryption-cert-password` | (If the IDP sends back encrypted SAML assertions) Password of the certificate whose public key the SAML Assertion is encrypted with                                                                                                                                                                                                                                                                                                                                           | `""`                       |


### ShinyProxy Proxy Social Authentication

| Name                              | Description        | Value                   |
| --------------------------------- | ------------------ | ----------------------- |
| `auth.authSocialEnabled`          | Enable Social Auth | `false`                 |
| `auth.social.facebookEnabled`     |                    | `false`                 |
| `auth.social.facebook.app-id`     |                    | `yourfacebookappid`     |
| `auth.social.facebook.app-secret` |                    | `yourfacebookappsecret` |
| `auth.social.twitterEnabled`      |                    | `false`                 |
| `auth.social.twitter.app-id`      |                    | `yourtwitterappid`      |
| `auth.social.twitter.app-secret`  |                    | `yourtwitterappsecret`  |
| `auth.social.googleEnabled`       |                    | `false`                 |
| `auth.social.google.app-id`       |                    | `yourgoogleappid`       |
| `auth.social.google.app-secret`   |                    | `yourgoogleappsecret`   |
| `auth.social.githubEnabled`       |                    | `false`                 |
| `auth.social.github.app-id`       |                    | `yourgithubappid`       |
| `auth.social.github.app-secret`   |                    | `yourgithubappsecret`   |
| `auth.social.linkedinEnabled`     |                    | `false`                 |
| `auth.social.linkedin.app-id`     |                    | `yourlinkedinappid`     |
| `auth.social.linkedin.app-secret` |                    | `yourlinkedinappsecret` |


### ShinyProxy Proxy WebService Authentication

| Name                                          | Description | Value                                  |
| --------------------------------------------- | ----------- | -------------------------------------- |
| `auth.authWebServiceEnabled`                  |             | `false`                                |
| `auth.webservice.authentication-url`          |             | `https://your-auth-server.com/login`   |
| `auth.webservice.authentication-request-body` |             | `{"username": "%s", "password": "%s"}` |


### ShinyProxy Proxy application parameters

| Name                                   | Description                                                                                                                                                                                                                                       | Value                                                                                                    |
| -------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | -------------------------------------------------------------------------------------------------------- |
| `proxy.title`                          | The title that is displayed in the ShinyProxy navigation bar;                                                                                                                                                                                     | `Open Analytics Shiny Proxy`                                                                             |
| `proxy.logo-url`                       | The url of the logo that is displayed in the ShinyProxy navigation bar; this can also be a local file using the file scheme (file://)                                                                                                             | `https://github.com/dabble-of-devops-bioanalyze/biohub-info/raw/master/logos/BioHub_v1_logo_only-01.png` |
| `proxy.landing-page`                   | The URL to send a user to after login; default value is / which will redirect the user to a list of the Shiny apps. Other typical values are /app/<app-name> or /app_direct/<app-name> which allows to immediately land on a (single) Shiny app;  | `/`                                                                                                      |
| `proxy.heartbeat-rate`                 | The user’s browser will sent a heartbeat call every heartbeat-rate milliseconds; default value is 10000 (10 seconds);                                                                                                                             | `10000`                                                                                                  |
| `proxy.heartbeat-timeout`              | If the server does not receive a heartbeat for heartbeat-timeout milliseconds, the relevant proxy will be released (and the container stopped); default value is 60000 (60 seconds). Apps can override this using the heartbeat-timeout property. | `60000`                                                                                                  |
| `proxy.authentication`                 | Authentication see the ShinyProxy [docs](https://www.shinyproxy.io/documentation/configuration/#authentication)                                                                                                                                   | `none`                                                                                                   |
| `proxy.container-log-path`             | ShinyProxy can be configured to store log files of running containers. These log files contain the stdout and stderr output of the R process running the Shiny app.                                                                               | `./container-logs`                                                                                       |
| `proxy.container-wait-time`            | timeout for the container to be available to ShinyProxy; defaults to 20s (20000)                                                                                                                                                                  | `600000`                                                                                                 |
| `proxy.container-backend`              | This is a helm chart so we're using Kubernetes                                                                                                                                                                                                    | `kubernetes`                                                                                             |
| `proxy.kubernetes.internal-networking` |                                                                                                                                                                                                                                                   | `true`                                                                                                   |
| `proxy.specs`                          | See the [specs](https://www.shinyproxy.io/documentation/configuration/#apps) docs.                                                                                                                                                                | `[]`                                                                                                     |


### Traffic Exposure parameters

| Name                            | Description                                                                                 | Value          |
| ------------------------------- | ------------------------------------------------------------------------------------------- | -------------- |
| `service.type`                  | Service type                                                                                | `LoadBalancer` |
| `service.port`                  | Service HTTP port                                                                           | `80`           |
| `service.httpsPort`             | Service HTTPS port                                                                          | `443`          |
| `service.nodePorts`             | Specify the nodePort(s) value(s) for the LoadBalancer and NodePort service types.           | `{}`           |
| `service.targetPort`            | Target port reference value for the Loadbalancer service types can be specified explicitly. | `{}`           |
| `service.loadBalancerIP`        | LoadBalancer service IP address                                                             | `""`           |
| `service.annotations`           | Service annotations                                                                         | `{}`           |
| `service.externalTrafficPolicy` | Enable client source IP preservation                                                        | `Cluster`      |


### Ingress parameters

| Name                        | Description                                                                                                                      | Value                    |
| --------------------------- | -------------------------------------------------------------------------------------------------------------------------------- | ------------------------ |
| `ingress.enabled`           | Set to true to enable ingress record generation                                                                                  | `false`                  |
| `ingress.pathType`          | Ingress path type                                                                                                                | `ImplementationSpecific` |
| `ingress.apiVersion`        | Force Ingress API version (automatically detected if not set)                                                                    | `""`                     |
| `ingress.hostname`          | Default host for the ingress resource                                                                                            | `nginx.local`            |
| `ingress.path`              | The Path to Nginx. You may need to set this to '/*' in order to use this with ALB ingress controllers.                           | `/`                      |
| `ingress.annotations`       | Additional annotations for the Ingress resource. To enable certificate autogeneration, place here your cert-manager annotations. | `{}`                     |
| `ingress.tls`               | Create TLS Secret                                                                                                                | `false`                  |
| `ingress.extraHosts`        | The list of additional hostnames to be covered with this ingress record.                                                         | `[]`                     |
| `ingress.extraPaths`        | Any additional arbitrary paths that may need to be added to the ingress under the main host.                                     | `[]`                     |
| `ingress.extraTls`          | The tls configuration for additional hostnames to be covered with this ingress record.                                           | `[]`                     |
| `ingress.secrets`           | If you're providing your own certificates, please use this to add the certificates as secrets                                    | `[]`                     |
| `healthIngress.enabled`     | Set to true to enable health ingress record generation                                                                           | `false`                  |
| `healthIngress.pathType`    | Ingress path type                                                                                                                | `ImplementationSpecific` |
| `healthIngress.hostname`    | When the health ingress is enabled, a host pointing to this will be created                                                      | `example.local`          |
| `healthIngress.annotations` | Additional annotations for the Ingress resource. To enable certificate autogeneration, place here your cert-manager annotations. | `{}`                     |
| `healthIngress.tls`         | Enable TLS configuration for the hostname defined at `healthIngress.hostname` parameter                                          | `false`                  |
| `healthIngress.extraHosts`  | The list of additional hostnames to be covered with this health ingress record                                                   | `[]`                     |
| `healthIngress.extraTls`    | TLS configuration for additional hostnames to be covered                                                                         | `[]`                     |
| `healthIngress.secrets`     | TLS Secret configuration                                                                                                         | `[]`                     |


## Credits and Thanks

Open source software is not built in a vacuum!

[ShinyProxy](https://www.shinyproxy.io/) backs this helm chart. It's a great piece of software to add authentication and load balancing to any RShiny, Dash, or Flask web application.
[Zero to ShinyProxy](https://github.com/remche/zero-to-shinyproxy) is another ShinyProxy helm chart that this chart uses as a base.
[CloudPosse](https://github.com/cloudposse) is a devops accelerator that has tons of great recipes and build tools that all devs should take advantage.

---

This project is part of the ["BioAnalyze"](https://www.dabbleofdevops.com/biohub) project, which aims to make High Performance Compute Architecture accessible to everyone.


It's 100% Open Source and licensed under the [APACHE2](LICENSE).






## Data Science Infrastructure on AWS

![BioAnalyze Logo](https://raw.githubusercontent.com/dabble-of-devops-bioanalyze/biohub-info/master/images/BioAnalyze-Ecosystem-Data-Visualization.jpeg)




## Introduction


- Cloud Native - Deploy your RShiny, Dash, and Flask apps to AWS in what I think is the least painful way possible.
- Authentication - enabled through [ShinyProxy](https://www.shinyproxy.io/documentation/configuration/) in the hosted version.
- Load Balancing - We're doing data science over here. We don't want big computers hanging out burning money when we're not even using them.
- Open source - Nothing is hidden behind a paywall.
- Self hosted using the DIY approach with the Helm Charts
- Hosted option with the AWS Marketplace (Coming Soon!).




## ✨ Quick Start Self Hosted with `Helm`

> Install the Helm Chart

  ```bash
  helm repo add bitnami https://charts.bitnami.com/bitnami
  helm repo add bioanalyze https://dabble-of-devops-bioanalyze.github.io/helm-charts/
  helm repo update
  helm upgrade --install \
    my-awesome-app \
    bioanalyze/shinyproxy \
    --values path-to-my/values.yaml
  ```

## ✨ Quick Start  - AWS Marketplace

Coming Soon!## Quick Start

The `Makefile` is always the source of truth in any BioAnalyze project.

  ```
  helm repo add bitnami https://charts.bitnami.com/bitnami
  helm repo add bioanalyze https://dabble-of-devops-bioanalyze.github.io/helm-charts/
  helm repo update
  helm upgrade --install \
    my-awesome-app \
    bioanalyze/shinyproxy \
    --values path-to-my/values.yaml
  ```


## Examples


## Access data in S3

*Please note that this will give read and write access to an S3 Bucket and should only used in trusted environments.*

In order to access data in S3 you need to create an IAM role policy and associate it with a K8s service account.

[Full Docs](https://docs.aws.amazon.com/eks/latest/userguide/create-service-account-iam-policy-and-role.html)

Change the value from `MY-S3-BUCKET` to your bucket.

```json
{
    "Version": "2012-10-17",
    "Statement": [
        {
            "Sid": "ListObjectsInBucket",
            "Effect": "Allow",
            "Action": ["s3:ListBucket"],
            "Resource": ["arn:aws:s3:::MY-S3-BUCKET"]
        },
        {
            "Sid": "AllObjectActions",
            "Effect": "Allow",
            "Action": "s3:*Object",
            "Resource": ["arn:aws:s3:::MY-S3-BUCKET/*"]
        }
    ]
}
```

Save this to `MY-S3-BUCKET-rw-policy.json`

```
aws iam create-policy \
  --policy-name MY-S3-BUCKET-rw-policy \
  --policy-document MY-S3-BUCKET-rw-policy.json
````

The ARN should come up when you create the role, but if you miss it you can search for it.

```
aws iam list-policies | jq -r '.Policies[] | select(.PolicyName|match("MY-S3-BUCKET-rw-policy")) | .Arn'
```

Then create the K8s service account using `eksctl`

```
eksctl create iamserviceaccount \
    --name MY-S3-BUCKET-rw \
    --namespace default \
    --region MY-REGION \
    --cluster MY-CLUSTER \
    --attach-policy-arn ABOVE-ARN \
    --approve \
    --override-existing-serviceaccounts
```






## Share the Love

Like this project? Please give it a ★ on [our GitHub](https://github.com/dabble-of-devops-bioanalyze/helm-charts)! (it helps **a lot**)



## Related Projects

Check out these related projects.

- [BioAnalyze Help Desk](https://dabbleofdevopshelp.zendesk.com/) - Home of the docs and help for the BioAnalyze Project.
- [BioAnalyze](https://www.bioanalyze.io) - BioAnalyze Website and Newsletter
- [Dabble of DevOps Consulting](https://www.dabbleofdevops.com) - Want to hire me to design your HPC infrastructure?
- [terraform-aws-eks-cluster](https://github.com/cloudposse/terraform-aws-eks-cluster/) - Base CloudPosse module for AWS EKS Clusters"


## References

For additional context, refer to some of these links.

- [ShinyProxy](https://www.shinyproxy.io/) - ShinyProxy is your favourite way to deploy Shiny apps in an enterprise context. It has built-in functionality for LDAP authentication and authorization, makes securing Shiny traffic (over TLS) a breeze and has no limits on concurrent usage of a Shiny app.

- [ShinyProxy Flask Demo](https://github.com/openanalytics/shinyproxy-flask-demo) - Example flask app with gunicorn
- [IAM Policy Creation](https://awscli.amazonaws.com/v2/documentation/api/latest/reference/iam/create-policy.html#examples) - AWS Docs for IAM Creation
- [EKSctl IAM service account example](https://github.com/weaveworks/eksctl/blob/main/examples/13-iamserviceaccounts.yaml) - Create your cluster with IAM policies attached.


## Help

**Got a question?** We got answers.

File a GitHub [issue](https://github.com/dabble-of-devops-bioanalyze/helm-charts/issues), send us an jillian@dabbleofdevops.com.

## Bioinformatics Infrastructure on AWS for Startups

I'll help you build your data science cloud infrastructure from the ground up so you can own it using open source software. Then I'll show you how to operate it and stick around for as long as you need us.

[Learn More](https://www.dabbleofdevops.com)

Work directly with me via email, slack, and video conferencing.

- **Scientific Workflow Automation and Optimization.** Got workflows that are giving you trouble? Let's work together to ensure that your analyses run with or without your scientists being fully caffeinated.
- **High Performance Compute Infrastructure.** Highly available, auto scaling clusters to analyze *all the (bioinformatics related!) things*. All setups are completely integrated with your workflow system of choice, whether that is Airflow, Prefect, Snakemake or Nextflow.
- **Kubernetes and AWS Batch Setup for Apache Airflow** Orchestrate your Bioinformatics Workflows with Apache Airflow. Get full auditing, SLA, logging and monitoring for your workflows running on AWS Batch.
- **High Performance Compute Setup that Int** You'll have built-in governance with accountability and audit logs for all changes.
- **Docker Images** Get advice and hands on training for your team to build complex software stacks onto docker images.
- **Training.** You'll receive hands-on training so your team can operate what we build.
- **Questions.** You'll have a direct line of communication between our teams via a Shared Slack channel.
- **Troubleshooting.** You'll get help to triage when things aren't working.
- **Bug Fixes.** We'll rapidly work with you to fix any bugs in our projects.

## Contributing

### Bug Reports & Feature Requests

Please use the [issue tracker](https://github.com/dabble-of-devops-bioanalyze/helm-charts/issues) to report any bugs or file feature requests.

### Developing

If you are interested in being a contributor and want to get involved in developing this project or help out with other projects, I would love to hear from you! Shoot me an email at jillian@dabbleofdevops.com.

In general, PRs are welcome. We follow the typical "fork-and-pull" Git workflow.

 1. **Fork** the repo on GitHub
 2. **Clone** the project to your own machine
 3. **Commit** changes to your own branch
 4. **Push** your work back up to your fork
 5. Submit a **Pull Request** so that we can review your changes

#### Developer Notes

The `README.md` is created using the standard [CloudPosse](https://github.com/cloudposse/terraform-example-module) template that has been modified to use BioAnalyze information and URLs, and other documentation is generated using [jupyter-book](https://jupyterbook.org/).

Terraform code does not render properly when using the `literalinclude` directive, so instead we use `pygmentize` to render it to html which is included directly.

```
.. raw:: html
   :file: ./_html/main.tf.html
```

**NOTE:** Be sure to merge the latest changes from "upstream" before making a pull request!



## Copyrights

Copyright © 2022-2022 [Dabble of DevOps, SCorp](https://www.dabbleofdevops.com)





## License

[![License](https://img.shields.io/badge/License-Apache%202.0-blue.svg)](https://opensource.org/licenses/Apache-2.0)

See [LICENSE](LICENSE) for full details.

```text
Licensed to the Apache Software Foundation (ASF) under one
or more contributor license agreements.  See the NOTICE file
distributed with this work for additional information
regarding copyright ownership.  The ASF licenses this file
to you under the Apache License, Version 2.0 (the
"License"); you may not use this file except in compliance
with the License.  You may obtain a copy of the License at

  https://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing,
software distributed under the License is distributed on an
"AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, either express or implied.  See the License for the
specific language governing permissions and limitations
under the License.
```









## Trademarks

All other trademarks referenced herein are the property of their respective owners.



### Contributors

<!-- markdownlint-disable -->
|  [![Jillian Rowe][jerowe_avatar]][jerowe_homepage]<br/>[Jillian Rowe][jerowe_homepage] |
<!-- markdownlint-restore -->

  [jerowe_homepage]: https://github.com/jerowe
  [jerowe_avatar]: https://img.cloudposse.com/150x150/https://github.com/jerowe.png

Learn more at [Dabble of DevOps](https://www.dabbleofdevops.com)

## Sponsor

BioAnalyze is and will always be open source. If you've found any of these resources helpful, please consider donating to the continued development of BioAnalyze.

[Sponsor BioAnalyze](https://github.com/sponsors/dabble-of-devops-bioanalyze)

  [logo]: https://cloudposse.com/logo-300x69.svg
  [docs]: https://cpco.io/docs?utm_source=github&utm_medium=readme&utm_campaign=dabble-of-devops-bioanalyze/helm-charts&utm_content=docs
  [website]: https://cpco.io/homepage?utm_source=github&utm_medium=readme&utm_campaign=dabble-of-devops-bioanalyze/helm-charts&utm_content=website
  [github]: https://cpco.io/github?utm_source=github&utm_medium=readme&utm_campaign=dabble-of-devops-bioanalyze/helm-charts&utm_content=github
  [jobs]: https://cpco.io/jobs?utm_source=github&utm_medium=readme&utm_campaign=dabble-of-devops-bioanalyze/helm-charts&utm_content=jobs
  [hire]: https://cpco.io/hire?utm_source=github&utm_medium=readme&utm_campaign=dabble-of-devops-bioanalyze/helm-charts&utm_content=hire
  [slack]: https://cpco.io/slack?utm_source=github&utm_medium=readme&utm_campaign=dabble-of-devops-bioanalyze/helm-charts&utm_content=slack
  [linkedin]: https://cpco.io/linkedin?utm_source=github&utm_medium=readme&utm_campaign=dabble-of-devops-bioanalyze/helm-charts&utm_content=linkedin
  [twitter]: https://cpco.io/twitter?utm_source=github&utm_medium=readme&utm_campaign=dabble-of-devops-bioanalyze/helm-charts&utm_content=twitter
  [testimonial]: https://cpco.io/leave-testimonial?utm_source=github&utm_medium=readme&utm_campaign=dabble-of-devops-bioanalyze/helm-charts&utm_content=testimonial
  [office_hours]: https://cloudposse.com/office-hours?utm_source=github&utm_medium=readme&utm_campaign=dabble-of-devops-bioanalyze/helm-charts&utm_content=office_hours
  [newsletter]: https://cpco.io/newsletter?utm_source=github&utm_medium=readme&utm_campaign=dabble-of-devops-bioanalyze/helm-charts&utm_content=newsletter
  [discourse]: https://ask.sweetops.com/?utm_source=github&utm_medium=readme&utm_campaign=dabble-of-devops-bioanalyze/helm-charts&utm_content=discourse
  [email]: https://cpco.io/email?utm_source=github&utm_medium=readme&utm_campaign=dabble-of-devops-bioanalyze/helm-charts&utm_content=email
  [commercial_support]: https://cpco.io/commercial-support?utm_source=github&utm_medium=readme&utm_campaign=dabble-of-devops-bioanalyze/helm-charts&utm_content=commercial_support
  [we_love_open_source]: https://cpco.io/we-love-open-source?utm_source=github&utm_medium=readme&utm_campaign=dabble-of-devops-bioanalyze/helm-charts&utm_content=we_love_open_source
  [terraform_modules]: https://cpco.io/terraform-modules?utm_source=github&utm_medium=readme&utm_campaign=dabble-of-devops-bioanalyze/helm-charts&utm_content=terraform_modules
  [readme_header_img]: https://cloudposse.com/readme/header/img
  [readme_header_link]: https://cloudposse.com/readme/header/link?utm_source=github&utm_medium=readme&utm_campaign=dabble-of-devops-bioanalyze/helm-charts&utm_content=readme_header_link
  [readme_footer_img]: https://cloudposse.com/readme/footer/img
  [readme_footer_link]: https://cloudposse.com/readme/footer/link?utm_source=github&utm_medium=readme&utm_campaign=dabble-of-devops-bioanalyze/helm-charts&utm_content=readme_footer_link
  [readme_commercial_support_img]: https://cloudposse.com/readme/commercial-support/img
  [readme_commercial_support_link]: https://cloudposse.com/readme/commercial-support/link?utm_source=github&utm_medium=readme&utm_campaign=dabble-of-devops-bioanalyze/helm-charts&utm_content=readme_commercial_support_link
  [share_twitter]: https://twitter.com/intent/tweet/?text=BioAnalyze+-+ShinyProxy+Helm+Chart&url=https://github.com/dabble-of-devops-bioanalyze/helm-charts
  [share_linkedin]: https://www.linkedin.com/shareArticle?mini=true&title=BioAnalyze+-+ShinyProxy+Helm+Chart&url=https://github.com/dabble-of-devops-bioanalyze/helm-charts
  [share_reddit]: https://reddit.com/submit/?url=https://github.com/dabble-of-devops-bioanalyze/helm-charts
  [share_facebook]: https://facebook.com/sharer/sharer.php?u=https://github.com/dabble-of-devops-bioanalyze/helm-charts
  [share_googleplus]: https://plus.google.com/share?url=https://github.com/dabble-of-devops-bioanalyze/helm-charts
  [share_email]: mailto:?subject=BioAnalyze+-+ShinyProxy+Helm+Chart&body=https://github.com/dabble-of-devops-bioanalyze/helm-charts
  [beacon]: https://ga-beacon.cloudposse.com/UA-76589703-4/dabble-of-devops-bioanalyze/helm-charts?pixel&cs=github&cm=readme&an=helm-charts
