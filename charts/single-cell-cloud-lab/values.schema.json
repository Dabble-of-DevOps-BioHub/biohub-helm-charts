{
    "title": "Chart Values",
    "type": "object",
    "properties": {
        "global": {
            "type": "object",
            "properties": {
                "imageRegistry": {
                    "type": "string",
                    "default": "\"\"",
                    "description": "Global Docker image registry"
                },
                "imagePullSecrets": {
                    "type": "array",
                    "default": "[]",
                    "description": "Global Docker registry secret names as an array"
                },
                "storageClass": {
                    "type": "string",
                    "default": "\"\"",
                    "description": "Global StorageClass for Persistent Volume(s)"
                }
            }
        },
        "kubeVersion": {
            "type": "string",
            "default": "\"\"",
            "description": "Override Kubernetes version"
        },
        "nameOverride": {
            "type": "string",
            "default": "\"\"",
            "description": "String to partially override common.names.fullname"
        },
        "fullnameOverride": {
            "type": "string",
            "default": "\"\"",
            "description": "String to fully override common.names.fullname"
        },
        "commonLabels": {
            "type": "object",
            "default": "{}",
            "description": "Labels to add to all deployed objects"
        },
        "commonAnnotations": {
            "type": "object",
            "default": "{}",
            "description": "Annotations to add to all deployed objects"
        },
        "clusterDomain": {
            "type": "string",
            "default": "cluster.local",
            "description": "Kubernetes cluster domain name"
        },
        "extraDeploy": {
            "type": "array",
            "default": "[]",
            "description": "Array of extra objects to deploy with the release"
        },
        "shinyproxy": {
            "type": "object",
            "properties": {
                "ingress": {
                    "type": "object",
                    "properties": {
                        "enabled": {
                            "type": "boolean",
                            "default": false,
                            "description": "enable an ingress"
                        },
                        "annotations": {
                            "type": "object",
                            "default": "{}",
                            "description": "annotations to add - usually for nginx ingress and/or external-dns"
                        }
                    }
                },
                "proxy": {
                    "type": "object",
                    "properties": {
                        "service": {
                            "type": "object",
                            "properties": {
                                "type": {
                                    "type": "string",
                                    "default": "LoadBalancer",
                                    "description": "LoadBalancer or ClusterIP"
                                }
                            }
                        },
                        "kubernetes": {
                            "type": "object",
                            "properties": {
                                "pod-wait-time": {
                                    "type": "number",
                                    "default": 600000,
                                    "description": "how long to wait for the pod to spin up"
                                }
                            }
                        },
                        "resources": {
                            "type": "object",
                            "properties": {
                                "requests": {
                                    "type": "object",
                                    "properties": {
                                        "cpu": {
                                            "type": "number",
                                            "default": 1,
                                            "description": "shinyproxy proxy cpu request"
                                        },
                                        "memory": {
                                            "type": "string",
                                            "default": "512Mi",
                                            "description": "shinyproxy proxy memory request"
                                        }
                                    }
                                },
                                "limits": {
                                    "type": "object",
                                    "properties": {
                                        "cpu": {
                                            "type": "number",
                                            "default": 8,
                                            "description": "shinyproxy proxy memory request"
                                        },
                                        "memory": {
                                            "type": "string",
                                            "default": "5G",
                                            "description": "shinyproxy proxy memory request"
                                        }
                                    }
                                }
                            }
                        },
                        "image": {
                            "type": "object",
                            "properties": {
                                "repository": {
                                    "type": "string",
                                    "default": "dabbleofdevops/shinyproxy",
                                    "description": "Shiny Proxy docker image repo"
                                },
                                "tag": {
                                    "type": "string",
                                    "default": "503883c",
                                    "description": "Shiny Proxy docker image tag"
                                }
                            }
                        },
                        "title": {
                            "type": "string",
                            "default": "BioAnalyze - Single Cell Cloud Lab",
                            "description": "The title that is displayed in the ShinyProxy navigation bar;"
                        },
                        "logo-url": {
                            "type": "string",
                            "default": "https://github.com/dabble-of-devops-bioanalyze/biohub-info/raw/master/logos/BioHub_v1_logo_only-01.png",
                            "description": "The url of the logo that is displayed in the ShinyProxy navigation bar; this can also be a local file using the file scheme (file://)"
                        },
                        "authentication": {
                            "type": "string",
                            "default": "none",
                            "description": "Authentication see the ShinyProxy [docs](https://www.shinyproxy.io/documentation/configuration/#authentication)"
                        },
                        "landing_page": {
                            "type": "string",
                            "default": "/app_direct/single-cell-cloud-lab/",
                            "description": "the URL to send a user to after login; default value is / which will redirect the user to a list of the Shiny apps. Other typical values are /app/<app-name> or /app_direct/<app-name> which allows to immediately land on a (single) Shiny app;"
                        },
                        "specs": {
                            "type": "array",
                            "description": "application id",
                            "items": {
                                "type": "object",
                                "properties": {
                                    "id": {
                                        "type": "string",
                                        "description": "application id"
                                    },
                                    "port": {
                                        "type": "number",
                                        "description": "port the internal application is running on"
                                    },
                                    "display_name": {
                                        "type": "string",
                                        "description": "Name displayed on the landing page"
                                    },
                                    "container-image": {
                                        "type": "string",
                                        "description": "Docker image"
                                    },
                                    "container-wait-time": {
                                        "type": "number",
                                        "description": ""
                                    },
                                    "heartbeat-enabled": {
                                        "type": "boolean",
                                        "description": ""
                                    },
                                    "heartbeat-timeout": {
                                        "type": "number",
                                        "description": ""
                                    },
                                    "container-memory-request": {
                                        "type": "string",
                                        "description": ""
                                    },
                                    "container-memory-limit": {
                                        "type": "string",
                                        "description": ""
                                    },
                                    "container-cpu-request": {
                                        "type": "number",
                                        "description": ""
                                    },
                                    "container-cpu-limit": {
                                        "type": "number",
                                        "description": ""
                                    },
                                    "target-path": {
                                        "type": "string",
                                        "description": ""
                                    },
                                    "container-env": {
                                        "type": "object",
                                        "properties": {
                                            "CELLXGENE_BUCKET": {
                                                "type": "string",
                                                "description": "S3 Bucket to load data from"
                                            },
                                            "SCRIPT_NAME": {
                                                "type": "string",
                                                "description": "SCRIPT_NAME env var to pass to gunicorn for correct proxy"
                                            },
                                            "SYNC_ENABLED": {
                                                "type": "string",
                                                "description": "Sync local cellxgene results to the S3 Bucket"
                                            },
                                            "PUBLIC": {
                                                "type": "string",
                                                "description": "Let ShinyProxy take care of the Auth"
                                            }
                                        }
                                    },
                                    "kubernetes-pod-patches": {
                                        "type": "string",
                                        "description": "Add some file mounts and env vars"
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
    }
}